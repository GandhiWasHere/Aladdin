@model Aladdin.Models.Product

@{
    ViewData["Title"] = "Edit";
    Layout = "~/Views/Shared/_LayoutNOHEADERFOOTER.cshtml";
}

<h1>Edit</h1>

<h4>Product</h4>
<hr />






<div class="row">
    <div class="col-md-4">
        <label for="fname">ProductName</label>
        <input type="text" id="ProductName" name="fname" value=@Model.ProductName><br><br>

        <input type="text" id="ProductID" name="fname" value=@Model.ProductID hidden>

        
        <input type="text" id="SupplierID" name="fname" value=@Model.SupplierID hidden>

        <label for="lname">ProductQuantityS</label>
        <input type="number" id="ProductQuantityS" name="lname" value=@Model.ProductQuantityS><br><br>

        <label for="lname">ProductQuantityM</label>
        <input type="number" id="ProductQuantityM" name="lname" value=@Model.ProductQuantityM><br><br>

        <label for="lname">ProductQuantityL</label>
        <input type="number" id="ProductQuantityL" name="lname" value=@Model.ProductQuantityL><br><br>

        <label for="lname">ProductColor</label>
        <input type="text" id="ProductColor" name="lname" value=@Model.ProductColor><br><br>

        <label for="lname">ProductRating</label>
        <input type="number" id="ProductRating" name="lname" value=@Model.ProductRating><br><br>

        <label for="lname">ProductPrice</label>
        <input type="number" id="ProductPrice" name="lname" value=@Model.ProductPrice><br><br>

        <label for="lname">ProductImage</label>
        <input type="file" id="ProductImage" name="lname" class=".custom-file-input"><br><br>
        <input type="text" id="ProductImageold" name="lname" value=@Model.ProductImage hidden>


        <input type="button" value="Save" id="btn" class="btn btn-primary">
    </div>
</div>





@section Scripts {

    <script>

        $('#btn').click(function () {
            var elmId = $(this).attr("id");



            if (typeof x6 == 'undefined') {
                x6 = $('#CustomerImageold').val()
            }




            send();
        });
        function send() {

            $.post("/products/edit", {
                ProductId: $('#ProductId').val(),
                ProductName: $('#ProductName').val(),
                ProductColor: $('#ProductColor').val(),
                ProductID: $('#ProductID').val(),
                SupplierID: $('#SupplierID').val(), ProductRating: $('#ProductRating').val(),
                ProductPrice: $('#ProductPrice').val(), ProductImage: x6,
                ProductQuantityS: $('#ProductQuantityS').val(), ProductQuantityM: $('#ProductQuantityM').val(),
                ProductQuantityL: $('#ProductQuantityL').val()

            }, function (data) {
                $("#maindiv").html(data);
            });
        }
    </script>




    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
   


    <script>
        File.prototype.convertToBase64 = function (callback) {
            var reader = new FileReader();
            reader.onloadend = function (e) {
                callback(e.target.result, e.target.error);
            };
            reader.readAsDataURL(this);
        };

        $("#ProductImage").on('change', function () {
            var selectedFile = this.files[0];
            selectedFile.convertToBase64(function (base64) {

                x5 = base64;



                $.post("/products/saveimage", {

                    file: x5

                }, function (data) {
                    x6 = data;
                });

            })
        });
    </script>
}
